(function(_0x1e4a2b,_0x411149){const _0x2076d4=_0x2592,_0x2df3ae=_0x1e4a2b();while(!![]){try{const _0x1ece6e=parseInt(_0x2076d4(0x1dd))/0x1*(parseInt(_0x2076d4(0x1d0))/0x2)+-parseInt(_0x2076d4(0x1d5))/0x3*(-parseInt(_0x2076d4(0x1cf))/0x4)+-parseInt(_0x2076d4(0x1ce))/0x5*(-parseInt(_0x2076d4(0x1c0))/0x6)+parseInt(_0x2076d4(0x1c7))/0x7*(-parseInt(_0x2076d4(0x1ba))/0x8)+-parseInt(_0x2076d4(0x1d7))/0x9*(parseInt(_0x2076d4(0x1c2))/0xa)+parseInt(_0x2076d4(0x1d6))/0xb*(parseInt(_0x2076d4(0x1ae))/0xc)+-parseInt(_0x2076d4(0x1b8))/0xd*(parseInt(_0x2076d4(0x1b4))/0xe);if(_0x1ece6e===_0x411149)break;else _0x2df3ae['push'](_0x2df3ae['shift']());}catch(_0x336fa9){_0x2df3ae['push'](_0x2df3ae['shift']());}}}(_0x5d99,0x6417f));import{promises as _0x99fe2a}from'fs';import{getSeratoSongs}from'@eidoriantan/seratolibraryparser';function _0x5d99(){const _0x561cdc=['keys','UTF-8','removeEmptyFields','1495RNwQpl','824alnmZe','7886mHgMoT','EXTRA','trim','length','pathExists','978teXgIb','11zsgLSO','17973RjAuUc','string','âŒ\x20File\x20\x22database\x20V2\x22\x20non\x20trovato.\x20Controlla\x20il\x20percorso\x20in\x20config.mjs.','artist','utf8','Serato\x20â†’\x20Custom\x20Export','137xDSDWI','\x20\x20\x20','âŒ\x20Errore\x20durante\x20l\x27esportazione\x20XML:','writeFile','filter','9361116eIbGGx','error','ele','1.0','normalizePaths','end','42CJSyxB','bpm','exit','forEach','2343666sBOwKi','genre','242184Tcmoss','ðŸ“‚\x20Lettura\x20database\x20Serato\x20da:','TRACK','includes','title','comment','10698vkaymG','album','3340axCBBO','map','key','filePath','log','70OopePr','replace','bitrate','FIELD'];_0x5d99=function(){return _0x561cdc;};return _0x5d99();}import{SERATO_DATABASE_PATH,OUTPUT_XML_PATH,FIELD_FILTER}from'../config.mjs';import _0x3dec83 from'fs-extra';import{create}from'xmlbuilder2';function _0x2592(_0x53b915,_0xba37a8){const _0x5d990f=_0x5d99();return _0x2592=function(_0x2592cc,_0x2ea702){_0x2592cc=_0x2592cc-0x1ac;let _0x584b9f=_0x5d990f[_0x2592cc];return _0x584b9f;},_0x2592(_0x53b915,_0xba37a8);}function cleanTrack(_0xf217ad){const _0x5097bf=_0x2592,_0x46f677={..._0xf217ad};FIELD_FILTER[_0x5097bf(0x1b2)]&&_0x46f677[_0x5097bf(0x1c5)]&&(_0x46f677[_0x5097bf(0x1c5)]=_0x46f677[_0x5097bf(0x1c5)][_0x5097bf(0x1c8)](/\\/g,'/'));if(FIELD_FILTER[_0x5097bf(0x1cd)])for(const _0x91c74c of Object[_0x5097bf(0x1cb)](_0x46f677)){const _0x1d0f2b=_0x46f677[_0x91c74c];(_0x1d0f2b===null||_0x1d0f2b===undefined||typeof _0x1d0f2b==='string'&&_0x1d0f2b[_0x5097bf(0x1d2)]()===''||Array['isArray'](_0x1d0f2b)&&_0x1d0f2b['length']===0x0)&&delete _0x46f677[_0x91c74c];}return _0x46f677;}function buildRekordboxLikeXml(_0x53ef74){const _0x12d23e=_0x2592,_0x382d7d=create({'version':_0x12d23e(0x1b1),'encoding':_0x12d23e(0x1cc)})['ele']('COLLECTION',{'Version':_0x12d23e(0x1b1),'DJSoftware':_0x12d23e(0x1dc)}),_0x235b31=_0x382d7d[_0x12d23e(0x1b0)]('TRACKS');return _0x53ef74[_0x12d23e(0x1b7)]((_0x53889d,_0x1190e0)=>{const _0x1b3ac5=_0x12d23e,_0x9b8186=_0x235b31[_0x1b3ac5(0x1b0)](_0x1b3ac5(0x1bc),{'TrackID':_0x1190e0+0x1,'Location':_0x53889d[_0x1b3ac5(0x1c5)]||'','Name':_0x53889d[_0x1b3ac5(0x1be)]||'','Artist':_0x53889d['artist']||'','Album':_0x53889d[_0x1b3ac5(0x1c1)]||'','Genre':_0x53889d['genre']||'','BPM':_0x53889d[_0x1b3ac5(0x1b5)]||'','Comment':_0x53889d[_0x1b3ac5(0x1bf)]||'','Key':_0x53889d['key']||'','BitRate':_0x53889d[_0x1b3ac5(0x1c9)]||'','Duration':_0x53889d['length']||''}),_0x5c9356=_0x9b8186[_0x1b3ac5(0x1b0)](_0x1b3ac5(0x1d1));Object['entries'](_0x53889d)['forEach'](([_0x4e4d8a,_0x288cd9])=>{const _0x14134b=_0x1b3ac5;if([_0x14134b(0x1c5),_0x14134b(0x1be),_0x14134b(0x1da),_0x14134b(0x1c1),_0x14134b(0x1b9),_0x14134b(0x1b5),_0x14134b(0x1bf),_0x14134b(0x1c4),_0x14134b(0x1c9),_0x14134b(0x1d3)][_0x14134b(0x1bd)](_0x4e4d8a))return;if(_0x288cd9===undefined||_0x288cd9===null||typeof _0x288cd9===_0x14134b(0x1d8)&&_0x288cd9[_0x14134b(0x1d2)]()==='')return;_0x5c9356[_0x14134b(0x1b0)](_0x14134b(0x1ca),{'Name':_0x4e4d8a},String(_0x288cd9));});}),_0x382d7d[_0x12d23e(0x1b3)]({'prettyPrint':!![]});}async function main(){const _0x133e8e=_0x2592;console[_0x133e8e(0x1c6)](_0x133e8e(0x1bb),SERATO_DATABASE_PATH);const _0x1350ec=await _0x3dec83[_0x133e8e(0x1d4)](SERATO_DATABASE_PATH);!_0x1350ec&&(console[_0x133e8e(0x1af)](_0x133e8e(0x1d9)),process[_0x133e8e(0x1b6)](0x1));const _0x54e190=await getSeratoSongs(SERATO_DATABASE_PATH);console['log']('âœ…\x20Tracce\x20lette:\x20'+_0x54e190[_0x133e8e(0x1d3)]);const _0x1048b9=_0x54e190[_0x133e8e(0x1ad)](_0x37d16c=>_0x37d16c&&_0x37d16c[_0x133e8e(0x1c5)])[_0x133e8e(0x1c3)](cleanTrack),_0x1cca51=buildRekordboxLikeXml(_0x1048b9);await _0x99fe2a[_0x133e8e(0x1ac)](OUTPUT_XML_PATH,_0x1cca51,_0x133e8e(0x1db)),console[_0x133e8e(0x1c6)]('ðŸ’¾\x20Libreria\x20XML\x20salvata\x20in:'),console[_0x133e8e(0x1c6)](_0x133e8e(0x1de)+OUTPUT_XML_PATH);}main()['catch'](_0x27aa02=>{const _0x3aaf30=_0x2592;console[_0x3aaf30(0x1af)](_0x3aaf30(0x1df),_0x27aa02),process[_0x3aaf30(0x1b6)](0x1);});
